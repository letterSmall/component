{% if section.blocks.size > 0 %}
<style>
  {% for block in section.blocks %}
  .promotion-granary-wrapper .image-wrapper .pro-link-{{ block.id }} {
    color: {{ block.settings.text_color }};
    background-color: {{ block.settings.bg_color }};
    border: 3px solid {{ block.settings.border_color }};
    top: {{ block.settings.top }}%;
    left: {{ block.settings.left }}%;
  }
  {% endfor %}
</style>
{% endif %}

<div class="promotion-granary-wrapper">
  <div class="page-width">
    <div class="granary-box">
      <div class="image-wrapper">
        {% if section.settings.image != blank %}
        <img class="spsmall-hide" src="{{ section.settings.image | img_url:'master' }}"/>
        {% endif %}
        {% if section.settings.image_mb != blank %}
        <img class="ipadup-hide" src="{{ section.settings.image_mb | img_url:'master' }}"/>
        {% else %}
        <img class="ipadup-hide" src="{{ section.settings.image | img_url:'master' }}"/>
        {% endif %}
        
        {% if section.blocks.size > 0 %}
        {% for block in section.blocks %}
        {% if block.settings.pro_link != blank %}
        <a class="pro-link pro-link-{{ block.id }}" href="{{ block.settings.pro_link }}">+</a>
        {% endif %}
        {% endfor %}
        {% endif %}
      </div>
      
      {% if section.settings.title != blank or section.settings.text != blank %}
      <div class="text-wrapper">
        <div class="title">{{ section.settings.title }}</div>
        <div class="text">{{ section.settings.text }}</div>
        {% if section.settings.button_label != blank and section.settings.button_link != blank %}
        <a href="{{ section.settings.button_link }}" class="btn promotion-btn tablet-down--hide">
          {{ section.settings.button_label }}
        </a>
        {% endif %}
      </div>
      {% endif %}
      
      {% if section.settings.button_label != blank and section.settings.button_link != blank %}
      <a href="{{ section.settings.button_link }}" class="btn promotion-btn tablet-up--hide">
        {{ section.settings.button_label }}
      </a>
      {% endif %}

    </div>
  </div>
</div>


{% schema %}
  {
    "name": "Promotion Granary", 
    "settings": [{
            "type": "image_picker",
            "id": "image",
            "label": "Image(Recommended size：730x416px)"
          },{
            "type": "image_picker",
            "id": "image_mb",
            "label": "Image Mobile(Recommended size：)"
          },{
            "type": "html",
            "id": "title",
            "label": "Title"
          },{
            "type": "html",
            "id": "text",
            "label": "Text"
          },{
            "type": "text",
            "id": "button_label",
            "label": "Button label"
          },
          {
            "type": "url",
            "id": "button_link",
            "label": "Button link"
          }
    ],
    "blocks": [
        {
            "type": "product_link",
            "name": "Product Link",
            "settings": [
                {
                    "type": "url",
                    "id": "pro_link",
                    "label": "Product Link"
                },
				{
                    "type":"color",
                    "id":"text_color",
                    "label":"Text Color",
                    "default":"#b07563"
                },
				{
                  "type": "color",
                  "id": "bg_color",
                  "label": "Background Color",
				  "default": "#ffffff"
                },
				{
                  "type": "color",
                  "id": "border_color",
                  "label": "Border Color",
				  "default": "#686662"
                },
                {
                  "type": "range",
                  "id": "top",
                  "min": 0,
                  "max": 100,
                  "step": 1,
                  "unit": "%",
                  "label": "Top Position",
                  "default": 40
                },
                {
                  "type": "range",
                  "id": "left",
                  "min": 0,
                  "max": 100,
                  "step": 1,
                  "unit": "%",
                  "label": "Left Position",
                  "default": 15
                }
            ]
        }
    ],
    "presets": [
      {
        "name": "Promotion Granary",
        "category": "image"
      }
    ]
  }
{% endschema %}
